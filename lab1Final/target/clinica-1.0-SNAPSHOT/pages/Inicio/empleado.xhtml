<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Registro de Paciente</title>
    <h:outputStylesheet library="css" name="default.css" />
    <h:outputStylesheet library="css" name="theme.css" />
    <link rel="icon" type="image/png" href="#{resource['images/examen.png']}" />
</h:head>
<h:body>
    <h:form id="pacienteForm">
        <p:growl id="growl" showDetail="true" sticky="false" life="3000" />
        <div class="contenedor_titulo">
            <div class="titulo_principal">
                <h2>Registro de Paciente</h2>
                <p:graphicImage name="images/logo_PB.png" styleClass="logo" />
                <h3>Gestión de Exámenes Médicos</h3>
            </div>
        </div>
        <h:panelGrid columns="6" style="margin-bottom: 20px;">
            <p:commandButton value="Antecedente Clínico" icon="pi pi-info-circle" update=":pacienteForm" />
            <p:commandButton value="Signos Vitales" icon="pi pi-heart" update=":pacienteForm"
                oncomplete="PF('reporteDialog').show();" />
            <p:commandButton value="Aparatos Sistemas" icon="pi pi-cog" update=":pacienteForm" />
            <p:commandButton value="Tipo de Examen Físico" icon="pi pi-file" update=":pacienteForm" />
            <p:commandButton value="Filtro" icon="pi pi-filter" action="#{pacienteUI.filtro}"
                update="@form:antecedentesTable, @form, @form:growl" />
            <p:commandButton value="Ver Reporte" icon="pi pi-chart-bar" update=":pacienteForm" />
        </h:panelGrid>
        <p:dialog id="reporteDialog" header="Signos Vitales" widgetVar="reporteDialog" modal="true" width="60%">
            <iframe id="reporteFrame" width="100%" height="500px" src="pages/Inicio/tipo_signo_vital.xhtml"
                frameborder="0"></iframe>
        </p:dialog>
        <!-- <h:panelGroup layout="block" styleClass="contenedor_1">-->
        <h:panelGrid columns="6" cellpadding="5">
            <h:outputLabel for="fecha" value="Fecha:" />
            <p:calendar id="fecha" value="#{pacienteUI.fecha}" pattern="dd/MM/yyyy" showOn="button" />
            <h:outputLabel for="empleado" value="Empleado:" />
            <p:selectOneMenu id="empleado" value="#{pacienteUI.selectedEmpleadoCue}">
                <f:selectItem itemLabel="Seleccione un Empleado" itemValue="" />
                <f:selectItems value="#{pacienteUI.empleados}" var="empleado" itemValue="#{empleado.cue}"
                    itemLabel="#{empleado.cue} - #{empleado.nombre1} #{empleado.apellido1}" />
            </p:selectOneMenu>
            <h:outputLabel for="tipoExamen" value="Tipo de Examen:" />
            <p:selectOneMenu id="tipoExamen" value="#{pacienteUI.selectedTipoExamenId}">
                <f:selectItem itemLabel="Seleccione un Tipo de Examen" itemValue="" />
                <f:selectItems value="#{pacienteUI.tiposExamen}" var="tipoExamen" itemValue="#{tipoExamen.id}"
                    itemLabel="#{tipoExamen.id} - #{tipoExamen.descripcion}" />
            </p:selectOneMenu>
        </h:panelGrid>


        <p:panel header="Antecedentes Clinicos">
            <p:dataTable id="antecedentesTable" var="antecedente" value="#{antecedentesClinicosUI.antecedentesClinicos}"
                editable="true" rowKey="#{antecedente.id}" selectionMode="single" editMode="cell">
                <p:column headerText="Antecedente">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{antecedente.idAntecedenteClinico.descripcion}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{antecedente.idAntecedenteClinico.descripcion}" readonly="true" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Respuesta">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{antecedente.respuesta}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:selectOneMenu value="#{antecedente.respuesta}">
                                <f:selectItem itemLabel="No" itemValue="No" />
                                <f:selectItem itemLabel="Si" itemValue="Si" />
                            </p:selectOneMenu>
                        </f:facet>
                    </p:cellEditor>
                </p:column>

                <p:column headerText="Observaciones">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{antecedente.observaciones}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{antecedente.observaciones}" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Acciones">
                    <p:commandButton value="Guardar" action="#{antecedentesClinicosUI.guardarAntecedentesClinicos}"
                        icon="pi pi-save" />
                </p:column>
            </p:dataTable>
        </p:panel>
        <p:panel header="Signos Vitales">
            <p:dataTable id="signosVitalesTable" var="signoVital" value="#{signosVitalesUI.signosVitales}"
                editable="true" rowKey="#{signoVital.id}" selectionMode="single" editMode="cell">
                <p:column headerText="Signo Vital">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{signoVital.idTipoSignoVital.descripcion}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{signoVital.idTipoSignoVital.descripcion}" readonly="true" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Respuesta">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{signoVital.respuesta}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{signoVital.respuesta}" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Observaciones">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{signoVital.observaciones}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{signoVital.observaciones}" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Acciones">
                    <p:commandButton value="Guardar" action="#{signosVitalesUI.guardarSignosVitales}"
                        icon="pi pi-save" />
                </p:column>
            </p:dataTable>
        </p:panel>
        <p:panel header="Aparatos/Sistemas">
            <p:dataTable id="aparatosSistemasTable" var="aparatoSistema"
                value="#{aparatoSistemasUI.aparatoSistemasList}" editable="true" rowKey="#{aparatoSistema.id}"
                selectionMode="single" editMode="cell" widgetVar="cellProducts">
                <p:column headerText="Aparato/Sistema">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{aparatoSistema.idAparatoSistema.descripcion}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{aparatoSistema.idAparatoSistema.descripcion}" readonly="true" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Respuesta">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{aparatoSistema.respuesta}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{aparatoSistema.respuesta}" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Observaciones">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{aparatoSistema.observaciones}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{aparatoSistema.observaciones}" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Acciones">
                    <p:commandButton value="Guardar" action="#{aparatoSistemasUI.guardarAparatoSistemas}"
                        icon="pi pi-save" />
                </p:column>
            </p:dataTable>
        </p:panel>

        <h2>Conclusiones</h2>
        <p:panelGrid columns="6" styleClass="grid">
            <p:outputLabel for="recomendacion" value="Recomendación:" />
            <p:inputTextarea id="recomendacion" value="#{pacienteUI.recomendacion}" rows="3" cols="30" />
            <p:outputLabel for="apto_laborar" value="Apto para Laborar:" />
            <p:selectBooleanCheckbox id="apto_laborar" value="#{pacienteUI.aptoLaborar}" />
            <p:outputLabel for="fecha_vencimiento" value="Fecha de Vencimiento:" />
            <p:calendar id="fecha_vencimiento" value="#{pacienteUI.fechaVencimiento}" pattern="yyyy-MM-dd"
                showOn="button" />
        </p:panelGrid>

        <div style="margin-top: 20px;">
            <p:commandButton value="Guardar" action="#{pacienteUI.guardarPaciente}"
                update="@form:antecedentesTable, @form:signosVitalesTable, @form:aparatosSistemasTable @form:growl"
                icon="pi pi-save" />
        </div>
    </h:form>
</h:body>

</html>